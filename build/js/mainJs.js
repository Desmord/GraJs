"use strict";var canvasWidth=document.querySelector("#mainBoard").offsetWidth,canvasHeight=document.querySelector("#mainBoard").offsetHeight,canvas=document.querySelector("canvas"),topCanvas=canvas.offsetTop,leftCanvas=canvas.offsetLeft,ctx=canvas.getContext("2d"),enemyImage=new Image;enemyImage.src="../png/ships/s2.png";var speed=10,enemyArray=[{id:1,x:200,y:300,xDirection:"-",yDirection:"+",angle:0},{id:2,x:800,y:400,xDirection:"-",yDirection:"+",angle:90}],pointerX=canvasWidth/2,pointerY=canvasHeight/2,drawBackground=function(){ctx.fillStyle="#000000",ctx.fillRect(0,0,canvasWidth,canvasHeight),ctx.fill()},drawPointer=function(){ctx.strokeStyle="#c93c3c",ctx.lineWidth=2,ctx.moveTo(pointerX,pointerY),ctx.arc(pointerX,pointerY,canvasWidth/50,0,2*Math.PI),ctx.stroke(),ctx.moveTo(pointerX-canvasWidth/50*2,pointerY),ctx.lineTo(pointerX+canvasWidth/50*2,pointerY),ctx.stroke(),ctx.moveTo(pointerX,pointerY-canvasWidth/50*2),ctx.lineTo(pointerX,pointerY+canvasWidth/50*2),ctx.stroke()},changeEnemyPosition=function e(){for(var t=0;t<enemyArray.length;t++)"+"==enemyArray[t].xDirection?enemyArray[t].x=enemyArray[t].x+1:enemyArray[t].x=enemyArray[t].x-1,"+"==enemyArray[t].yDirection?enemyArray[t].y=enemyArray[t].y+1:enemyArray[t].y=enemyArray[t].y-1;setTimeout(e,speed)},changeEnemyDirection=function e(){for(var t=1e3*(Math.floor(5*Math.random())+1),n=0;n<enemyArray.length;n++)Math.floor(2*Math.random())+1==1?enemyArray[n].xDirection="+":enemyArray[n].xDirection="-",Math.floor(2*Math.random())+1==1?enemyArray[n].yDirection="+":enemyArray[n].yDirection="-";setTimeout(e,t)},drawEnemies=function(){for(var e=0;e<enemyArray.length;e++)ctx.drawImage(enemyImage,enemyArray[e].x,enemyArray[e].y,canvasWidth/35,canvasHeight/25)},clearCanvas=function(){ctx.clearRect(0,0,ctx.width,ctx.height),ctx.beginPath()},draw=function(){clearCanvas(),drawBackground(),drawEnemies(),drawPointer()},canvasEvent=function(e){pointerX=e.clientX-leftCanvas,pointerY=e.clientY-topCanvas},mouseMoveEvent=function(){document.addEventListener("mousemove",canvasEvent)},mainLoop=function(){setTimeout(changeEnemyDirection,1e3),setTimeout(changeEnemyPosition,speed),setInterval(draw,5)},startEvent=function(e){e.classList.add("flash"),setTimeout(function(){e.innerHTML="Stop",setTimeout(function(){e.classList.remove("flash")},250)},250)},stopEvent=function(e){e.classList.add("flash"),setTimeout(function(){e.innerHTML="Start",setTimeout(function(){e.classList.remove("flash")},250)},250)},buttonEvent=function(){var e=document.querySelector("#startStopButton");e.addEventListener("click",function(){"Start"==e.innerHTML?startEvent(e,speed):stopEvent(e,speed)})};canvas.height=canvasHeight,canvas.width=canvasWidth,buttonEvent(),mainLoop(),mouseMoveEvent();